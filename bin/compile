#!/usr/bin/env bash

# O primeiro argumento é o diretório de build passado pelo Heroku
BUILD_DIR=$1

# Caminho do script Python dentro do buildpack
BUILDPACK_DIR=$(dirname "$0")
SCRIPT_PATH="$BUILDPACK_DIR/../update_package_json.py"

# Verifique se o arquivo Python existe
if [ ! -f "$SCRIPT_PATH" ]; then
  echo "Erro: O script update_package_json.py não foi encontrado."
  exit 1
fi

# Copiar o script Python para o diretório de build
cp "$SCRIPT_PATH" "$BUILD_DIR/"

# Executar o script Python para modificar o package.json
python3 "$BUILD_DIR/update_package_json.py"